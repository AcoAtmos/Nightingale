<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Verifikasi Akun</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white shadow-lg rounded-xl p-8 w-full max-w-md text-center">
        <div class="flex justify-center mb-4">
            <div class="h-14 w-14 rounded-full bg-blue-100 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" 
                     class="h-8 w-8 text-blue-500" fill="none" 
                     viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 11c0-.552-.448-1-1-1s-1 .448-1 1 .448 1 1 1 1-.448 1-1zm-1 4h.01M12 4.354a4 4 0 110 7.292M6.343 17.657A8 8 0 1117.657 6.343 8 8 0 016.343 17.657z" />
                </svg>
            </div>
        </div>

        <h1 class="text-2xl font-semibold text-gray-800 mb-2">Verifikasi Akun</h1>
        <p id="p" class="text-gray-500 mb-6">Sedang memverifikasi akun Anda...</p>

        <div id="statusBox" class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-gray-700">
            Mengambil data verifikasi...
        </div>
    </div>

    <script type="module">
        // notifikasi 
        import { notifikasi } from '../../../public/js/utility/notifikasi.js';
        // Ambil ID dari URL
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get("id");
        const statusBox = document.getElementById("statusBox");
        const p = document.getElementById("p");

        if (!id) {
            statusBox.innerHTML = "<span class='text-red-500 font-semibold'>ID tidak ditemukan.</span>";
        } else {
            statusBox.innerHTML = "Memverifikasi ID: <b>" + id + "</b> ...";

            // Kirim ke API aktivasi (ganti sesuai endpoint kamu)
            fetch(`http://localhost/Belajar_kelas/Mas_usman/Nightingale/api/users/terverivikasi/verivikasi_email.php?id=${id}`, {
                method: "GET",
            })
            .then(response => {
                if(response.ok){
                    response.text().then(
                        statusBox.innerHTML = "<span class='text-green-500 font-semibold'>Akun berhasil diverifikasi!</span>",
                        p.innerHTML = "<p>Akun Anda telah berhasil diverifikasi. Anda dapat menutup halaman ini dan melanjutkan ke aplikasi.</p>",
                    );
                }
            });

        }

    </script>

</body>
</html>